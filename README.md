# High-Level Synthesis Performance Prediction using GNNs: Benchmarking, Modeling, and Advancing


<!-- TABLE OF CONTENTS -->
## Table of Contents

* [About the Project](#about-the-project)
  * [Built With](#built-with)
* [Dataset](#dataset)
  * [Synthetic data](#synthetic-data)
  * [Real-case data](#real-case-data)
* [Getting Started](#getting-started)
  * [Prerequisites](#prerequisites)
  * [Installation](#installation)
* [Usage](#usage)
* [Roadmap](#roadmap)



<!-- ABOUT THE PROJECT -->
## About The Project

This project explores different GNN-based strategies in HLS performance prediction, aiming to provide fast and accurate circuit quality evaluation from early design stages as well as to facilitate hardware agile design.

The contribution of this work is three-fold. 
* First, we build a standard benchmark containing 40k C synthesizable programs, which includes both synthetic programs and three sets of real-world HLS benchmarks. Each program is implemented on FPGA to generate ground-truth performance metrics.
* Second, we formally formulate the HLS performance prediction problem on graphs, and propose multiple modeling strategies with GNNs that leverage different trade-offs between prediction timeliness (early/late prediction) and accuracy. 
* Third, we further propose a novel hierarchical GNN that does not sacrifice timeliness but largely improves prediction accuracy, significantly outperforming HLS tools

The papers related to this project:
* DAC2022: [High-Level Synthesis Performance Prediction using GNNs: Benchmarking, Modeling, and Advancing](https://arxiv.org/abs/2201.06848)
* More statistics of the benchmark: [Program-to-Circuit: Exploiting GNNs for Program Representation and Circuit Translation](https://arxiv.org/abs/2109.06265)

## Dataset

### Synthetic data
* Synthetic programs in C language are generated by [ldrgrn](https://github.com/gergo-/ldrgen).

* Generate synthetic basic blocks:
```sh
frama-c -ldrgen -ldrgen-stmt-depth 1 -ldrgen-expr-depth 3
```
* Generate synthetic C programs with control signals (e.g., loop and branch):
```sh
frama-c -ldrgen -ldrgen-stmt-depth 1 -ldrgen-expr-depth 3
```


### Real-case data

We currently consider three mainstream benchmarks in HLS to build our real-case CDFGs.

* [PolyBench/C](http://web.cs.ucla.edu/~pouchet/software/polybench/)
* [CHStone](http://www.ertl.jp/chstone/)
* [MachSuite](https://github.com/breagen/MachSuite)


<!-- GETTING STARTED -->
## Getting Started


To get a local copy up and running follow these simple steps.

### Prerequisites

More information can be found in [ldrgrn](https://github.com/gergo-/ldrgen)

### Installation

1. Clone the repo
```sh
git clone https://github.com/github_username/repo_name.git
```
2. Install Stellargraph packages (even with conda, please use pip for installation)
```sh
pip install Stellargraph
```



<!-- USAGE EXAMPLES -->
## Usage

Use this space to show useful examples of how a project can be used. Additional screenshots, code examples and demos work well in this space. You may also link to more resources.

_For more examples, please refer to the [Documentation](https://example.com)_

